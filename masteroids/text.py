
from OpenGL.GL import *

CHAR_SPACING = 2.7
LINE_SPACING = 4

def draw_char(char):
    if char not in CHAR_LINES:
        raise ValueError("Char not supported for drawing: '{}'".format(char))

    glBegin(GL_LINES)
    for point1, point2 in CHAR_LINES[char]:
        glVertex2f(point1, point2)
    glEnd()

def draw_line(string, pos, scale, color):
    if color is not None:
        glColor(color)

    glMatrixMode(GL_MODELVIEW)
    glPushMatrix()
    glTranslate(pos[0], pos[1], 0)
    glScale(scale, scale, 0)

    for i, char in enumerate(string):
        draw_char(char)
        glTranslate(CHAR_SPACING, 0, 0)

    glPopMatrix()

def draw_str(string, pos=(0, 0), scale=1, color=None):
    scale = scale * 0.05
    for i, line in enumerate(string.split("\n")):
        line_pos = (pos[0], pos[1] - i*LINE_SPACING*scale)
        draw_line(line, line_pos, scale, color)

def draw_sample_str():
    draw_str("ABCDEFGHIJKLM\nNOPQRSTUVWXYZ\n1234567890", pos=(-0.9, 0))

CHAR_LINES = {
    ' ': (),
    'A': (
        (0, 0), (0, 2),
        (0, 2), (1, 3),
        (1, 3), (2, 2),
        (2, 2), (2, 0),
        (0, 1.5), (2, 1.5)
    ),
    'B': (
        (0, 0), (0, 3),
        (0, 3), (1.5, 3),
        (1.5, 3), (2, 2.5),
        (2, 2.5), (2, 1.75),
        (2, 1.75), (1.75, 1.5),
        (1.75, 1.5), (2, 1.25),
        (2, 1.25), (2, 0.25),
        (2, 0.25), (1.75, 0),
        (1.75, 0), (0, 0),
        (0, 1.5), (1.75, 1.5),
    ),
    'C': (
        #(2, 0), (0, 0),
        #(0, 0), (0, 3),
        #(0, 3), (2, 3),
        (2, 0), (0.5, 0),
        (0.5, 0), (0, 0.5),
        (0, 0.5), (0, 2.5),
        (0, 2.5), (0.5, 3),
        (0.5, 3), (2, 3),
    ),
    'D': (
        (0, 0), (0, 3),
        (0, 3), (1.5, 3),
        (1.5, 3), (2, 2.5),
        (2, 2.5), (2, 0.5),
        (2, 0.5), (1.5, 0),
        (1.5, 0), (0, 0),
    ),
    'E': (
        (2, 0), (0, 0),
        (0, 0), (0, 3),
        (0, 3), (2, 3),
        (0, 1.5), (2, 1.5),
    ),
    'F': (
        (0, 0), (0, 3),
        (0, 3), (2, 3),
        (0, 1.5), (1.5, 1.5),
    ),
    'G': (
        (2, 3), (0.5, 3),
        (0.5, 3), (0, 2.5),
        (0, 2.5), (0, 0.5),
        (0, 0.5), (0.5, 0),
        (0.5, 0), (1.5, 0),
        (1.5, 0), (2, 0.5),
        (2, 0.5), (2, 1.5),
        (2, 1.5), (1, 1.5),
    ),
    'H': (
        (0, 0), (0, 3),
        (2, 0), (2, 3),
        (0, 1.5), (2, 1.5),
    ),
    'I': (
        (0, 0), (2, 0),
        (0, 3), (2, 3),
        (1, 0), (1, 3),
    ),
    'J': (
        (0.25, 3), (1.75, 3),
        (1, 3), (1, 0.5),
        (1, 0.5), (0.5, 0),
        (0.5, 0), (0, 0),
    ),
    'K': (
        (0, 0), (0, 3),
        (0, 1.5), (0.5, 1.5),
        (0.5, 1.5), (2, 3),
        (0.5, 1.5), (2, 0),
    ),
    'L': (
        (2, 0), (0, 0),
        (0, 0), (0, 3),
    ),
    'M': (
        (0, 0), (0, 3),
        (0, 3), (1, 1.5),
        (1, 1.5), (2, 3),
        (2, 3), (2, 0),
    ),
    'N': (
        (0, 0), (0, 3),
        (0, 3), (2, 0),
        (2, 0), (2, 3),
    ),
    'O': (
        (0, 0.5), (0, 2.5),
        (0, 2.5), (0.5, 3),
        (0.5, 3), (1.5, 3),
        (1.5, 3), (2, 2.5),
        (2, 2.5), (2, 0.5),
        (2, 0.5), (1.5, 0),
        (1.5, 0), (0.5, 0),
        (0.5, 0), (0, 0.5),
    ),
    'P': (
        (0, 0), (0, 3),
        (0, 3), (1.5, 3),
        (1.5, 3), (2, 2.5),
        (2, 2.5), (2, 2),
        (2, 2), (1.5, 1.5),
        (1.5, 1.5), (0, 1.5),
    ),
    'Q': (
        (0, 0.5), (0, 2.5),
        (0, 2.5), (0.5, 3),
        (0.5, 3), (1.5, 3),
        (1.5, 3), (2, 2.5),
        (2, 2.5), (2, 0.5),
        (2, 0.5), (1.5, 0),
        (1.5, 0), (0.5, 0),
        (0.5, 0), (0, 0.5),
        (2, 0), (1, 1.5),
    ),
    'R': (
        (0, 0), (0, 3),
        (0, 3), (1.5, 3),
        (1.5, 3), (2, 2.5),
        (2, 2.5), (2, 2),
        (2, 2), (1.5, 1.5),
        (1.5, 1.5), (0, 1.5),
        (1, 1.5), (2, 0),
    ),
    'S': (
        (0, 0), (1.5, 0),
        (1.5, 0), (2, 0.5),
        (2, 0.5), (2, 1),
        (2, 1), (1.5, 1.5),
        (1.5, 1.5), (0.5, 1.5),
        (0.5, 1.5), (0, 2),
        (0, 2), (0, 2.5),
        (0, 2.5), (0.5, 3),
        (0.5, 3), (2, 3),
    ),
    'T': (
        (0, 3), (2, 3),
        (1, 0), (1, 3),
    ),
    'U': (
        (0, 3), (0, 0.5),
        (0, 0.5), (0.5, 0),
        (0.5, 0), (1.5, 0),
        (1.5, 0), (2, 0.5),
        (2, 0.5), (2, 3),
    ),
    'V': (
        (0, 3), (1, 0),
        (1, 0), (2, 3),
    ),
    'W': (
        (0, 3), (1/3, 0),
        (1/3, 0), (1, 1.5),
        (1, 1.5), (5/3, 0),
        (5/3, 0), (2, 3),
    ),
    'X': (
        (0, 0), (2, 3),
        (0, 3), (2, 0),
    ),
    'Y': (
        (1, 0), (1, 1.5),
        (1, 1.5), (0, 3),
        (1, 1.5), (2, 3),
    ),
    'Z': (
        (0, 3), (2, 3),
        (2, 3), (0, 0),
        (0, 0), (2, 0),
    ),
    '0': (
        (0, 0.5), (0, 2.5),
        (0, 2.5), (0.5, 3),
        (0.5, 3), (1.5, 3),
        (1.5, 3), (2, 2.5),
        (2, 2.5), (2, 0.5),
        (2, 0.5), (1.5, 0),
        (1.5, 0), (0.5, 0),
        (0.5, 0), (0, 0.5),
        (0, 0.5), (2, 2.5),
    ),
    '1': (
        (0.25, 0), (1.75, 0),
        (1, 0), (1, 3),
        (1, 3), (0.25, 2.25),
    ),
    '2': (
        (0, 2.5), (0.5, 3),
        (0.5, 3), (1.5, 3),
        (1.5, 3), (2, 2.5),
        (2, 2.5), (2, 2),
        (2, 2), (0, 0),
        (0, 0), (2, 0),
    ),
    '3': (
        (0, 2.5), (0.5, 3),
        (0.5, 3), (1.5, 3),
        (1.5, 3), (2, 2.5),
        (2, 2.5), (2, 2),
        (2, 2), (1.5, 1.5),
        (1.5, 1.5), (2, 1),
        (2, 1), (2, 0.5),
        (2, 0.5), (1.5, 0),
        (1.5, 0), (0.5, 0),
        (0.5, 0), (0, 0.5),
        (1.5, 1.5), (1, 1.5),
    ),
    '4': (
        (0, 3), (0, 1.5),
        (0, 1.5), (2, 1.5),
        (1.5, 3), (1.5, 0),
    ),
    '5': (
        (0, 0), (1.5, 0),
        (1.5, 0), (2, 0.5),
        (2, 0.5), (2, 1),
        (2, 1), (1.5, 1.5),
        (1.5, 1.5), (0, 1.5),
        (0, 1.5), (0, 3),
        (0, 3), (2, 3),
    ),
    '6': (
        (2, 3), (0.5, 3),
        (0.5, 3), (0, 2.5),
        (0, 2.5), (0, 0.5),
        (0, 0.5), (0.5, 0),
        (0.5, 0), (1.5, 0),
        (1.5, 0), (2, 0.5),
        (2, 0.5), (2, 1),
        (2, 1), (1.5, 1.5),
        (1.5, 1.5), (0, 1.5),
    ),
    '7': (
        (0, 3), (2, 3),
        (2, 3), (0, 0),
        (0.5, 1.5), (1.5, 1.5),
    ),
    '8': (
        (0, 0.5), (0, 1),
        (0, 1), (0.5, 1.5),
        (0.5, 1.5), (0, 2),
        (0, 2), (0, 2.5),
        (0, 2.5), (0.5, 3),
        (0.5, 3), (1.5, 3),
        (1.5, 3), (2, 2.5),
        (2, 2.5), (2, 2),
        (2, 2), (1.5, 1.5),
        (1.5, 1.5), (2, 1),
        (2, 1), (2, 0.5),
        (2, 0.5), (1.5, 0),
        (1.5, 0), (0.5, 0),
        (0.5, 0), (0, 0.5),
        (0.5, 1.5), (1.5, 1.5),
    ),
    '9': (
        (2, 0), (2, 3),
        (2, 3), (0, 3),
        (0, 3), (0, 2),
        (0, 2), (0.5, 1.5),
        (0.5, 1.5), (2, 1.5),
    ),
    '>': (
        (0, 3), (2, 1.5),
        (2, 1.5), (0, 0),
    ),
    '<': (
        (2, 3), (0, 1.5),
        (0, 1.5), (2, 0),
    ),
    '-': (
        (0, 1.5), (2, 1.5),
    )
}
